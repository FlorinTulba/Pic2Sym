## Appendix ##
[Back to start page](../ReadMe.md)

#### A.	Technical Details

The application was tested on *Windows 7 64 bits* and developed in *C++*.

Following *open\-source* and *platform\-independent* libraries were employed in the code:
- **[Boost](http://www.boost.org/)** for *filesystem*, *serialization* and other utilities
- **[FreeType 2](http://freetype.org/)** for *reading and processing fonts*
- **[OpenCV](http://opencv.org/)** for a minimal *graphical interface* and the provided *matrix and image processing capabilities*

However, it *runs only under Windows*, as it uses Windows\-specific:
- *Open / Save Dialog*
- *Select Font Dialog* and also *reads the registries* to find the *font file for the chosen font* (**FreeType** needs that file).

The decision to offer *support only for 64bits machines* originated from the lengthy compilation of **OpenCV** from latest sources (*version 3.0.0 at that time*). There were no binaries yet for that version. Now [they exist](http://sourceforge.net/projects/opencvlibrary/files/opencv-win/3.0.0/opencv-3.0.0.exe/download), but I prefer the binaries customized for my machine.

If *interested in the 32bits version of Pic2Sym*, you may search for ***Win32*** *binaries* of **OpenCV**, **FreeType 2** and **Boost**(*Serialization* and *Filesystem*), then link them within the project.

The *class diagram* from below presents a *simplified* perspective of the application:<br>
![](ClassDiag.jpg)<br>
The ***Controller*** manages the image transformation process through the following classes:
- ***Img*** \- the image to approximate with symbols
- ***Transformer*** \- preprocesses the image and approximates it patch by patch
- ***FontEngine*** \- involved in loading a new font file and using from it a given encoding of a certain size
	- ***PmsCont*** \- simple container holding each loaded glyph and some related data (part of ***FontEngine***)
		- ***PixMapSym*** \- a particular loaded symbol (item in ***PmsCont***)
- ***MatchEngine*** \- the responsible of finding the best symbol approximating a patch; also a **composite** holding match aspects
	- ***MatchAspect*** \- base class for all 8 implemented match aspects
	- ***CachedData*** \- generic values needed during transformations
	- ***SymData*** \- symbol\-specific values needed during transformations
- ***Settings*** \- how to configure the transformation
	- ***ImgSettings*** \- sets the result size limits
	- ***SymSettings*** \- which font family, style, encoding and size tto use for the approximating symbols
	- ***MatchSettings*** \- how to adjust the matching aspects during approximation

While comparing the symbol set with a patch, there are values which can be reused among the employed ***MatchAspect***s. Such shareable values are grouped by the ***MatchParams*** class.

***BestMatch*** holds the index of the most similar symbol to a patch, found at a given time, while investigating sequentially all the glyphs.


The ***GUI\-related classes*** were omitted from the diagram. They simply interact with the ***Controller***. Their role is setting or getting data and initiating requests or reporting errors.

The comments within the code provide more explanations.

#### B.	Installation

1.	Download the repository files
2.	Copy ***Common.props***, ***Debug.props*** and ***Release.props*** from **install/** folder to the solution folder
3.	Unpack ***include.zip*** and ***lib.zip*** to the solution folder
4.	Open the solution file and build it for **64bits** platform
5.	*Optionally* install the free font file ***BPmonoBold.ttf*** from the **res/** folder or from [here][1], in order to be visible while running the application

#### C.	Directory Structure

- **bin**/ contains the archieve ***Pic2Sym.zip*** with the *executable* and *required dll\-s*
- **doc**/ contains the *documentation of the project* and 2 subfolders:
	- **examples** with various results generated by the Pic2Sym project
	- **licenses** with the *license files* from *Boost*, *FreeType* and *OpenCV*
- **install**/ contains following files (*generated by scripts*) needed during installation:
	- 3 *properties files* (***Common.props***, ***Debug.props*** and ***Release.props***) used by the 2 projects: Pic2Sym and UnitTesting
	- 2 *archives* ***include.zip*** and ***lib.zip*** that contain the *headers* and *libraries* needed by the 2 projects, except from those provided already by Windows and Visual Studio.
- **res**/ contains:
    - 2 small free *font files* (***BPmonoBold.ttf*** and ***vga855.fon***) used by Unit Tests
    - ***NoImage.jpg*** that appears when the application starts
    - ***defaultMatchSettings.txt*** \- configuration file used for the first start
- **src**/ contains the *sources* of the project
- **test**/ contains *Unit Test* files

The root folder contains also the *solution file*, *projects\-specific* files and the license file *agpl-3.0.txt*.

-------
[Back to start page](../ReadMe.md)

[1]:http://www.dafont.com/bpmono.font